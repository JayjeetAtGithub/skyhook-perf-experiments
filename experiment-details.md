# Experiments

## 4 OSD (Baremetal ; m510 ; Cloudlab Utah)

###  Infrastructure
```
Total OSDs: 4
Total Space: 4 * 50GB = 200GB
            (OSDs * 100)
Total PGs = ------------ = 4 * 100 / 3 = ~128
             pool size  
CPUs per OSD: 16
Memory per OSD: 64 GB
Threads used in experiment: 64 (4 * 16 cores/node)
```

### Number of Rows in Files of Different Sizes
**TODO:** Support 4MB and 128MB
```
8MB: 440,000
16MB: 800,000
32MB: 1,400,000
64MB: 2,600,000
```

### Total Rows in Dataset and Dataset Size

```
Total Rows: 1,200,000,000 (1.2 Billion)
```

#### 16 MB (800,000) * 1500 - 

**Parquet**:
```
100% = [165.43587970733643, 165.36367225646973, 165.24528217315674] (CPU: ~1600%)
10% = [167.65004539489746, 167.32088470458984, 167.58832144737244] (CPU: ~1600%)
1% = [169.13996744155884, 169.1092517375946, 169.0941984653473] (CPU: ~1600%)
0.0001% = [168.34860968589783, 168.1900224685669, 168.08894538879395] (CPU: ~1600%)

Filters used:
# df[df['total_amount'] > 27] # 10%
# df[df['total_amount'] > 69] # 1%
# df[df['total_amount'] > 700] # 0.0001%
```

**Rados Parquet**: 
```
100% = 
10% =   [203.42191910743713, 203.93918442726135, 204.11645436286926] 
1% =  [196.36917161941528, 196.00127148628235, 196.3048655986786] 
0.0001% = [194.85378527641296, 194.13238525390625, 193.93808841705322] 


Filters used:
# df[df['total_amount'] > 27] # 10%
# df[df['total_amount'] > 69] # 1%
# df[df['total_amount'] > 700] # 0.0001%
```

#### 4 MB (200,000) * 6000 - 

**Parquet**:
```
100% = [179.22981977462769, 177.58432602882385, 177.5553960800171] (CPU: ~1600%)
10% = [190.32088017463684, 188.51263117790222, 189.0104079246521] (CPU: ~1600%)
1% = [184.87677526474, 183.14688372612, 183.29009532928467] (CPU: ~1600%)
0.0001% =  [182.65148067474365, 180.70382261276245, 180.77496194839478] (CPU: ~1600%) [Filter "total_amount" > 500]
```

**Rados Parquet**: 
```
100% = [242.08347446,  238.541295633]
10% = [188.29391074180603, 185.933180809021, 191.58979320526123]
1% = [179.79757499694824, 183.95941805839539, 182.32112073898315]
0.0001% = [183.33024334907532, 182.9018440246582, 181.007399559021] [Filter "total_amount" > 500]
```
